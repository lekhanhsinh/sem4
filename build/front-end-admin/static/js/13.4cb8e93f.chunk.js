(window["webpackJsonpfront-end-admin"]=window["webpackJsonpfront-end-admin"]||[]).push([[13],{105:function(e,t,a){"use strict";var n=a(117),r=a(166),l=a(187),i=a(119),c=a(127),o=Object(c.a)((function(e,t){var a=t.headers;return{headers:Object(n.a)({},a)}})),u=Object(i.b)({uri:"http://api.herebedragon.com:4000/graphql",credentials:"include",fetchOptions:{credentials:"include"}}),d=new r.a({cache:new l.a,link:o.concat(u)});t.a=d},124:function(e,t,a){"use strict";var n=a(143),r=a(0),l=a.n(r),i=a(459),c=a(460),o=a(461),u=a(464),d=a(188),m=a(102),s=a(24),f=a(7),p=(a(125),i.a),E=localStorage.getItem("userInfo");t.a=Object(f.g)((function(e){var t=e.history.push,a=Object(r.useState)(E),i=Object(n.a)(a,2),f=i[0],g=i[1];return l.a.createElement(p,{className:"header"},l.a.createElement(c.a,{type:"flex",justify:"space-between"},l.a.createElement(s.b,{to:"/EditableTable",className:"button-blog"},"ADMIN"),f?l.a.createElement(o.a,{span:4,className:"button-block-loggedin"},l.a.createElement(u.a,{size:"large",icon:"user"}),l.a.createElement(d.a,{onClick:function(){localStorage.removeItem("userInfo"),g(""),t("/LoginAdmin")}},l.a.createElement(m.a,{type:"logout"}),"Log out")):l.a.createElement(o.a,{span:4,className:"button-block"},l.a.createElement(d.a,null,l.a.createElement(s.b,{to:"/LoginAdmin"},"Login")))))}))},125:function(e,t,a){},469:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(156),i=a(117),c=a(134),o=a(135),u=a(144),d=a(136),m=a(145),s=a(157),f=a(244),p=a(467),E=a(468),g=a(463),b=a(188),h=a(455),y=a(102),v=a(465),O=(a(126),a(24)),j=a(109),I=a(104),k=a(105),S=a(462);function x(){var e=Object(j.a)(["\n    query GetEmployees {\n        getEmployees {\n                id\n                email\n                name\n                role\n          }\n    }\n"]);return x=function(){return e},e}var w=Object(I.a)(x()),C=function(){return k.a.query({query:w}).then((function(e){return e.data.getEmployees})).catch((function(e){S.a.info(e.message)}))};function M(){var e=Object(j.a)(["\n    mutation UpdateEmployee(\n        $id:String!,\n        $detail:EmployeeDetailInputType!,\n    ){\n        updateEmployee(\n            id:$id,\n            detail:$detail,\n        ){\n            id\n            email\n            name\n            role\n        }\n    }\n"]);return M=function(){return e},e}var D=Object(I.a)(M()),N=function(e,t){return console.log(e),k.a.mutate({mutation:D,variables:{id:e,detail:t}}).then((function(e){return console.log(e.data.updateEmployee)})).catch((function(e){S.a.info(e.message)}))};function A(){var e=Object(j.a)(["\n    mutation DeleteEmployee($id:String!){\n        deleteEmployee(id:$id)\n    }\n"]);return A=function(){return e},e}var R=Object(I.a)(A()),q=function(e){return k.a.mutate({mutation:R,variables:{id:e}}).then((function(e){return e.data.deleteEmployee})).catch((function(e){S.a.info(e.message)}))},$=(f.a.Option,r.a.createContext("")),F=p.a.create()((function(e){var t=e.form,a=(e.index,Object(s.a)(e,["form","index"]));return r.a.createElement($.Provider,{value:t},r.a.createElement("tr",a))})),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).input=void 0,a.form=void 0,a.state={editing:!1},a.toggleEdit=function(){var e=!a.state.editing;a.setState({editing:e},(function(){e&&a.input.focus()}))},a.save=function(e){var t=a.props,n=t.record,r=t.handleSave;a.form.validateFields((function(t,l){t&&t[e.currentTarget.id]||(a.toggleEdit(),r(Object(i.a)({},n,{},l)))}))},a.renderCell=function(e){var t=a.props,n=t.children,l=t.dataIndex,i=t.record,c=t.title,o=a.state.editing;a.form=e;return o?r.a.createElement(p.a.Item,{style:{margin:0}},e.getFieldDecorator(l,{rules:[{required:!0,message:"".concat(c," is required.")}],initialValue:i[l]})(r.a.createElement(E.a,{ref:function(e){return a.input=e},onPressEnter:a.save,onBlur:a.save,placeholder:"enter something"}))):r.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24,width:"100%",height:"30px"},onClick:a.toggleEdit},n)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.editable,a=(e.dataIndex,e.id,e.title,e.record,e.index,e.handleSave,e.children),n=Object(s.a)(e,["editable","dataIndex","id","title","record","index","handleSave","children"]);return r.a.createElement("td",n,t?r.a.createElement($.Consumer,null,this.renderCell):a)}}]),t}(r.a.Component),T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).formRef=void 0,a.saveFormRef=function(e){a.formRef=e},a.columns=[],a.handleDelete=function(e,t){q(t);var n=Object(l.a)(a.state.dataSource);a.setState({dataSource:n.filter((function(t){return t.key!==e}))})},a.handleClick=function(e){console.log("click ",e),a.setState({current:e.key})},a.handleSave=function(e){var t=Object(l.a)(a.state.dataSource),n=t.findIndex((function(t){return e.key===t.key})),r=t[n];t.splice(n,1,Object(i.a)({},r,{},e));var c={id:e.id,detail:{name:e.name}};N(c.id,c.detail),a.setState({dataSource:t})},a.columns=[{title:"Id",dataIndex:"id"},{title:"Name",dataIndex:"name",editable:!0},{title:"Email",dataIndex:"email"},{title:"Role",dataIndex:"role"},{title:"Action",dataIndex:"action",render:function(e,t){return a.state.dataSource.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{style:{},title:"Sure to delete?",onConfirm:function(){return a.handleDelete(t.key,t.id)}},r.a.createElement(b.a,{type:"danger"},"Delete"))):null}}],a.state={current:"4",dataSource:[],count:0,indeterminate:!0,checkAll:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;C().then((function(t){var a=[];for(var n in t)a.push({key:parseInt(n,10),id:t[n].id,name:t[n].name,email:t[n].email,role:t[n].role});console.log(t),e.setState({collapsed:!1,dataSource:a,count:a.length})}))}},{key:"render",value:function(){var e=this,t=this.state.dataSource,a={body:{row:F,cell:L}},n=this.columns.map((function(t){return t.editable?Object(i.a)({},t,{onCell:function(a){return{record:a,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleSave:e.handleSave}}}):t}));return r.a.createElement("div",null,r.a.createElement("h1",{style:{textAlign:"center"}},"EmployeeInfo"),r.a.createElement(h.a,{onClick:this.handleClick,selectedKeys:[this.state.current],mode:"horizontal",style:{textAlign:"center"}},r.a.createElement(h.a.Item,{key:"1"},r.a.createElement(y.a,{type:"user"}),r.a.createElement("span",null,"ManagerUser"),r.a.createElement(O.b,{to:"/ManagerUser"})),r.a.createElement(h.a.Item,{key:"2"},r.a.createElement(y.a,{type:"shopping"}),r.a.createElement("span",null,"ManagerOrder"),r.a.createElement(O.b,{to:"/ManagerOrder"})),r.a.createElement(h.a.Item,{key:"3"},r.a.createElement(y.a,{type:"user-add"}),r.a.createElement("span",null,"RegisterEmployee"),r.a.createElement(O.b,{to:"/RegisterEmployee"})),r.a.createElement(h.a.Item,{key:"4"},r.a.createElement(y.a,{type:"team"}),r.a.createElement("span",null,"ManagerEmployee"),r.a.createElement(O.b,{to:"/ManagerEmployee"})),r.a.createElement(h.a.Item,{key:"5"},r.a.createElement(y.a,{type:"file-image"}),r.a.createElement("span",null,"ManagerImage"),r.a.createElement(O.b,{to:"/ManagerImage"}))),r.a.createElement(v.a,{components:a,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:t,columns:n}))}}]),t}(r.a.Component),U=a(131),z=a(124);t.default=function(){return r.a.createElement(U.a,{type:["right","left"]},r.a.createElement(z.a,null),r.a.createElement("div",{key:"0",style:{marginTop:"100px"}},r.a.createElement(T,null)))}}}]);
//# sourceMappingURL=13.4cb8e93f.chunk.js.map