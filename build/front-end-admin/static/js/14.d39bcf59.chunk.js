(window["webpackJsonpfront-end-admin"]=window["webpackJsonpfront-end-admin"]||[]).push([[14],{105:function(e,t,a){"use strict";var n=a(117),r=a(166),i=a(187),c=a(119),l=a(127),o=Object(l.a)((function(e,t){var a=t.headers;return{headers:Object(n.a)({},a)}})),d=Object(c.b)({uri:"http://api.herebedragon.com:4000/graphql",credentials:"include",fetchOptions:{credentials:"include"}}),u=new r.a({cache:new i.a,link:o.concat(d)});t.a=u},124:function(e,t,a){"use strict";var n=a(143),r=a(0),i=a.n(r),c=a(459),l=a(460),o=a(461),d=a(464),u=a(188),s=a(102),m=a(24),f=a(7),g=(a(125),c.a),p=localStorage.getItem("userInfo");t.a=Object(f.g)((function(e){var t=e.history.push,a=Object(r.useState)(p),c=Object(n.a)(a,2),f=c[0],h=c[1];return i.a.createElement(g,{className:"header"},i.a.createElement(l.a,{type:"flex",justify:"space-between"},i.a.createElement(m.b,{to:"/EditableTable",className:"button-blog"},"ADMIN"),f?i.a.createElement(o.a,{span:4,className:"button-block-loggedin"},i.a.createElement(d.a,{size:"large",icon:"user"}),i.a.createElement(u.a,{onClick:function(){localStorage.removeItem("userInfo"),h(""),t("/LoginAdmin")}},i.a.createElement(s.a,{type:"logout"}),"Log out")):i.a.createElement(o.a,{span:4,className:"button-block"},i.a.createElement(u.a,null,i.a.createElement(m.b,{to:"/LoginAdmin"},"Login")))))}))},125:function(e,t,a){},470:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(156),c=a(117),l=a(134),o=a(135),d=a(144),u=a(136),s=a(145),m=a(157),f=a(244),g=a(467),p=a(468),h=a(463),b=a(188),E=a(455),v=a(102),y=a(465),O=(a(126),a(24)),j=a(109),I=a(104),S=a(105),k=a(462);function x(){var e=Object(j.a)(["\n    mutation DeleteOrder($id:String!){\n        deleteOrder(id:$id)\n    }\n"]);return x=function(){return e},e}var w=Object(I.a)(x()),C=function(e){return S.a.mutate({mutation:w,variables:{id:e}}).then((function(e){return e.data.deleteOrder})).catch((function(e){k.a.info(e.message)})).catch((function(e){k.a.info(e.message)}))};function q(){var e=Object(j.a)(["\n    query GetOrders {\n        getOrders{\n            items{\n              quantity\n              size\n              image{\n                id\n                name\n                description\n                path\n              }\n              totalPrice\n            }\n            totalPrice\n            address\n            status  \n          }\n    }\n"]);return q=function(){return e},e}var M=Object(I.a)(q()),P=function(){return S.a.query({query:M}).then((function(e){return e.data.getOrders})).catch((function(e){})).catch((function(e){k.a.info(e.message)}))};function z(){var e=Object(j.a)(["\n    mutation UpdateOrder(\n        $id:String!,\n        $detail:OrderDetailInputType!,\n    ){\n        updateOrder(\n            id:$id,\n            detail:$detail,\n        ){\n            \n                items {\n                  quantity\n                  size\n                  image {\n                    id\n                    name\n                    description\n                    path\n                  }\n                  totalPrice\n                }\n                totalPrice\n                address\n              }\n        \n    }\n"]);return z=function(){return e},e}var D=Object(I.a)(z()),A=function(e,t){return S.a.mutate({mutation:D,variables:{id:e,detail:t}}).then((function(e){return console.log(e.data.updateOrder)})).catch((function(e){k.a.info(e.message)}))},N=(f.a.Option,r.a.createContext("")),R=g.a.create()((function(e){var t=e.form,a=(e.index,Object(m.a)(e,["form","index"]));return r.a.createElement(N.Provider,{value:t},r.a.createElement("tr",a))})),$=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).input=void 0,a.form=void 0,a.state={editing:!1},a.toggleEdit=function(){var e=!a.state.editing;a.setState({editing:e},(function(){e&&a.input.focus()}))},a.save=function(e){var t=a.props,n=t.record,r=t.handleSave;a.form.validateFields((function(t,i){t&&t[e.currentTarget.id]||(a.toggleEdit(),r(Object(c.a)({},n,{},i)))}))},a.renderCell=function(e){var t=a.props,n=t.children,i=t.dataIndex,c=t.record,l=t.title,o=a.state.editing;return a.form=e,o?r.a.createElement(g.a.Item,{style:{margin:0}},e.getFieldDecorator(i,{rules:[{required:!0,message:"".concat(l," is required.")}],initialValue:c[i]})(r.a.createElement(p.a,{ref:function(e){return a.input=e},onPressEnter:a.save,onBlur:a.save,placeholder:"enter something"}))):r.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24,width:"100%",height:"30px"},onClick:a.toggleEdit},n)},a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.editable,a=(e.dataIndex,e.id,e.title,e.record,e.index,e.handleSave,e.children),n=Object(m.a)(e,["editable","dataIndex","id","title","record","index","handleSave","children"]);return r.a.createElement("td",n,t?r.a.createElement(N.Consumer,null,this.renderCell):a)}}]),t}(r.a.Component),T=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).formRef=void 0,a.saveFormRef=function(e){a.formRef=e},a.columns=[],a.handleDelete=function(e,t){C(t);var n=Object(i.a)(a.state.dataSource);a.setState({dataSource:n.filter((function(t){return t.key!==e}))})},a.handleSave=function(e){var t=Object(i.a)(a.state.dataSource),n=t.findIndex((function(t){return e.key===t.key})),r=t[n];t.splice(n,1,Object(c.a)({},r,{},e));var l={id:e.id,detail:{name:e.name,address:e.address}};A(l.id,l.detail),a.setState({dataSource:t})},a.handleClick=function(e){console.log("click ",e),a.setState({current:e.key})},a.columns=[{title:"Image",dataIndex:"image"},{title:"Quantity",dataIndex:"quantity",editable:!0},{title:"Size",dataIndex:"size",editable:!0},{title:"TotalPirce",dataIndex:"totalPrice"},{title:"Material",dataIndex:"material"},{title:"Status",dataIndex:"status"},{title:"Action",dataIndex:"action",render:function(e,t){return a.state.dataSource.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{style:{},title:"Sure to delete?",onConfirm:function(){return a.handleDelete(t.key,t.id)}},r.a.createElement(b.a,{type:"danger"},"Delete"))):null}}],a.state={current:"2",dataSource:[],count:0,indeterminate:!0,checkAll:!1},a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;P().then((function(t){var a=[];for(var n in console.log(t),t)a.push({key:parseInt(n,10),image:t[n].items[0].image.path,quantity:t[n].items[0].quantity,size:t[n].items[0].size,totalPrice:t[n].items[0].totalPrice,status:t[n].items[0].status,material:t[n].items[0].material});e.setState({dataSource:a,count:a.length})}))}},{key:"render",value:function(){var e=this,t=this.state.dataSource,a={body:{row:R,cell:$}},n=this.columns.map((function(t){return t.editable?Object(c.a)({},t,{onCell:function(a){return{record:a,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleSave:e.handleSave}}}):t}));return r.a.createElement("div",null,r.a.createElement("h1",{style:{textAlign:"center"}},"OrderInfo"),r.a.createElement(E.a,{onClick:this.handleClick,selectedKeys:[this.state.current],mode:"horizontal",style:{textAlign:"center"}},r.a.createElement(E.a.Item,{key:"1"},r.a.createElement(v.a,{type:"user"}),r.a.createElement("span",null,"ManagerUser"),r.a.createElement(O.b,{to:"/ManagerUser"})),r.a.createElement(E.a.Item,{key:"2"},r.a.createElement(v.a,{type:"shopping"}),r.a.createElement("span",null,"ManagerOrder"),r.a.createElement(O.b,{to:"/ManagerOrder"})),r.a.createElement(E.a.Item,{key:"3"},r.a.createElement(v.a,{type:"user-add"}),r.a.createElement("span",null,"RegisterEmployee"),r.a.createElement(O.b,{to:"/RegisterEmployee"})),r.a.createElement(E.a.Item,{key:"4"},r.a.createElement(v.a,{type:"team"}),r.a.createElement("span",null,"ManagerEmployee"),r.a.createElement(O.b,{to:"/ManagerEmployee"})),r.a.createElement(E.a.Item,{key:"5"},r.a.createElement(v.a,{type:"file-image"}),r.a.createElement("span",null,"ManagerImage"),r.a.createElement(O.b,{to:"/ManagerImage"}))),r.a.createElement(y.a,{components:a,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:t,columns:n}))}}]),t}(r.a.Component),F=a(131),L=a(124);t.default=function(){return r.a.createElement(F.a,{type:["right","left"]},r.a.createElement(L.a,null),r.a.createElement("div",{key:"0",style:{marginTop:"100px"}},r.a.createElement(T,null)))}}}]);
//# sourceMappingURL=14.d39bcf59.chunk.js.map